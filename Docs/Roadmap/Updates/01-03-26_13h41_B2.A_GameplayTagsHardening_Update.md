# B2.A — Hardening de GameplayTags (runtime)

## Objetivo
Reservar o namespace `Omni.*` ao framework e falhar cedo no startup quando existir tag `Omni.*` fora do conjunto oficial.

## Escopo aplicado
- Somente runtime.
- Sem alterações em Forge/CI.

## Implementação
Arquivo alterado:
- `Plugins/Omni/Source/OmniRuntime/Private/OmniRuntimeModule.cpp`

Mudanças:
1. Adicionado guard de startup (`TagGuard`) no módulo de runtime.
2. No `StartupModule`, executa validação antes do gameplay:
   - Coleta todas as GameplayTags registradas.
   - Filtra tags com prefixo `Omni.`.
   - Compara com o conjunto oficial do framework (`GetOfficialOmniGameplayTags`).
3. Se encontrar tag `Omni.*` não oficial:
   - `UE_LOG(..., Fatal, ...)` com mensagem clara.
   - Mensagem orienta usar `Game.*` ou prefixo do projeto (ex.: `MeuProjeto.*`).
4. Se não houver violação:
   - Log explícito de sucesso do guard.

## Evidências
### Build
Comando:
`powershell -ExecutionPolicy Bypass -File .\Scripts\omni_build_dev.ps1`

Resultado:
- `Succeeded`

### Smoke loop (headless)
Comando:
`UnrealEditor-Cmd.exe OmniSandbox.uproject -game -unattended -nullrhi -nosplash -NoSound -log -ExecCmds="omni.sprint auto 1,omni.sprint status,quit"`

Resultado:
- Inicialização OK
- Runtime funcional no loop
- Encerramento limpo (`Closing by request`)

### Logs relevantes (`Saved/Logs/OmniSandbox.log`)
- `[Omni][TagGuard] Validacao de GameplayTags concluida: Omni.* encontrados=0, violacoes=0.`
- `LogOmniMovementSystem: Movement system initialized. Manifest=OmniOfficialManifest_0`
- `LogOmniRegistry: SystemRegistry initialized. Systems: 3. Manifest: OmniOfficialManifest_0`
- `[Omni] AutoSprint iniciada por 1.0s. Systems afetados: 1`
- `Closing by request`

## Observação
- A lista oficial `Omni.*` está centralizada em `GetOfficialOmniGameplayTags()` para evoluir junto do framework quando novas tags oficiais forem adicionadas.
